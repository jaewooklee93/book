## 안녕하세요, 세상!

이제 Rust를 설치하셨으므로 첫 번째 Rust 프로그램을 작성하는 시간입니다.

새로운 언어를 배우는 것은 일반적으로 화면에 "안녕하세요, 세상!"이라는 텍스트를 출력하는 작은 프로그램을 작성하는 것이므로, 여기서도 동일하게 하겠습니다.

>참고: 이 책은 명령 프롬프트에 대한 기본적인 이해를 가정합니다. Rust는 코드가 있는 위치에 대한 특정 요구 사항이 없으므로 편의를 위해 통합 개발 환경(IDE) 대신 명령 프롬프트를 사용하는 것을 권장합니다. 많은 IDE가 이제 Rust 지원을 제공하기 시작했습니다. 자세한 내용은 IDE의 설명서를 참조하십시오. Rust 팀은 `rust-analyzer`를 통해 훌륭한 IDE 지원을 제공하는 데 집중하고 있습니다. 자세한 내용은 [Appendix D][devtools]<!-- ignore -->를 참조하십시오.

### 프로젝트 디렉토리 생성

Rust 코드를 저장할 디렉토리를 만들기 시작합니다. Rust에 코드의 위치는 중요하지 않지만, 이 책의 연습과 프로젝트에서는 홈 디렉토리에 *projects* 디렉토리를 만들고 모든 프로젝트를 그 안에 두는 것을 권장합니다.

터미널을 열고 다음 명령을 입력하여 *projects* 디렉토리를 만들고 *projects* 디렉토리 내에 "안녕하세요, 세상!" 프로젝트를 위한 디렉토리를 만듭니다.

Linux, macOS 및 Windows의 PowerShell에서 다음을 입력하십시오.

```console
$ mkdir ~/projects
$ cd ~/projects
$ mkdir hello_world
$ cd hello_world
```

Windows CMD에서 다음을 입력하십시오.

```cmd
> mkdir "%USERPROFILE%\projects"
> cd /d "%USERPROFILE%\projects"
> mkdir hello_world
> cd hello_world
```

### Rust 프로그램 작성 및 실행

새 소스 파일을 만들고 *main.rs* 라고 이름을 짓습니다. Rust 파일은 항상 *.rs* 확장자로 끝납니다. 파일 이름에 여러 단어를 사용하는 경우 언더스코어를 사용하여 구분하는 것이 관례입니다. 예를 들어, *hello_world.rs* 를 사용하는 것이 좋습니다.

*main.rs* 파일을 열고 1-1번 표에 있는 코드를 입력하십시오.

<Listing number="1-1" file-name="main.rs" caption="안녕하세요, 세상!를 출력하는 프로그램">

```rust
fn main() {
    println!("Hello, world!");
}
```

</Listing>

파일을 저장하고 *~/projects/hello_world* 디렉토리의 터미널 창으로 돌아갑니다. Linux 또는 macOS에서 다음 명령을 입력하여 파일을 컴파일하고 실행하십시오.

```console
$ rustc main.rs
$ ./main
안녕하세요, 세상!
```

Windows에서 `.\\main.exe`를 입력하십시오.

```powershell
> rustc main.rs
> .\\main.exe
안녕하세요, 세상!
```

어떤 운영 체제를 사용하든 "안녕하세요, 세상!"이라는 문자열이 터미널에 출력되어야 합니다. 출력되지 않으면 [Appendix D][devtools]<!-- ignore --> 부분을 참조하여 도움을 받으십시오.

만약 "안녕하세요, 세상!"이 출력되었다면, 축하합니다! 공식적으로 Rust 프로그램을 작성했습니다. Rust 프로그래머가 되셨습니다. 환영합니다!

### Rust 프로그램의 구조

이 "안녕하세요, 세상!" 프로그램을 자세히 살펴보겠습니다. 첫 번째 부분은 다음과 같습니다.

```rust
fn main() {

}
```

이 코드는 `main`이라는 함수를 정의합니다. `main` 함수는 모든 실행 가능한 Rust 프로그램에서 항상 처음 실행되는 특별한 함수입니다. 여기서 첫 번째 줄은 `main`이라는 이름을 가진 매개변수가 없고 반환 값이 없는 함수를 선언합니다. 매개변수가 있다면 괄호 `()` 안에 들어갑니다.

함수의 몸통은 `{}`로 둘러싸여 있습니다. Rust는 모든 함수 몸통에 괄호를 사용하도록 요구합니다. 함수 선언과 괄호를 같은 줄에 배치하는 것이 좋습니다.

>참고: Rust 프로젝트에서 표준 스타일을 유지하려면 `rustfmt`라는 자동 코드 형식 도구를 사용하여 코드를 특정 스타일로 형식을 줄 수 있습니다. 자세한 내용은 [Appendix D][devtools]<!-- ignore -->를 참조하십시오. Rust 팀은 `rustc`와 함께 이 도구를 표준 Rust 배포판에 포함했습니다. 따라서 컴퓨터에 이미 설치되어 있을 것입니다!

`main` 함수의 몸통에는 다음과 같은 코드가 있습니다.

```rust
    println!("Hello, world!");
```

이 줄은 프로그램에서 하는 모든 작업을 수행합니다. 화면에 텍스트를 출력합니다.


화면에 표시됩니다. 여기서 주목할 사항은 네 가지입니다.

첫째, Rust 스타일은 탭이 아닌 네 개의 공백으로 들여쓰는 것입니다.

둘째, `println!`은 Rust 매크로를 호출합니다. 함수를 호출했더라면 `println` ( `!` 없이)으로 입력되었을 것입니다. 매크로에 대해서는 19장에서 자세히 설명하겠습니다. 지금은 `!`를 사용하면 매크로를 호출하는 것이 아니라 일반 함수를 호출하는 것이며 매크로가 함수와 동일한 규칙을 따르지 않는다는 것을 알아두세요.

셋째, `\"Hello, world!\"` 문자열을 볼 수 있습니다. 이 문자열을 `println!` 함수에 인자로 전달하고 화면에 출력됩니다.

넷째, 줄을 세미콜론 (`;`)으로 끝냅니다. 이는 이 표현이 끝났고 다음 표현이 시작될 수 있음을 나타냅니다. 대부분의 Rust 코드 줄은 세미콜론으로 끝납니다.

### 컴파일 및 실행은 별도의 단계입니다

새로 만들어진 프로그램을 실행했으므로 프로세스의 각 단계를 살펴보겠습니다.

Rust 프로그램을 실행하기 전에 `rustc` 명령어를 사용하여 컴파일해야 합니다. 이 명령어에 소스 파일의 이름을 전달합니다. 예를 들어 다음과 같습니다.

```console
$ rustc main.rs
```

C 또는 C++ 배경을 가진 경우 `gcc` 또는 `clang`과 유사하다는 것을 알 수 있습니다. 컴파일이 성공하면 Rust는 이진 실행 가능 파일을 출력합니다.

Linux, macOS 및 Windows의 PowerShell에서 실행 가능 파일을 볼 수 있습니다.

```console
$ ls
main  main.rs
```

Linux와 macOS에서는 두 개의 파일이 표시됩니다. Windows의 PowerShell에서는 CMD를 사용할 때와 동일한 세 개의 파일이 표시됩니다. CMD를 사용하는 경우 다음과 같이 입력합니다.

```cmd
> dir /B %= /B 옵션은 파일 이름만 표시하도록 합니다. =%
main.exe
main.pdb
main.rs
```

이렇게 하면 *.rs* 확장자의 소스 코드 파일, (*main.exe* Windows, 다른 플랫폼에서는 *main*) 실행 가능 파일, 그리고 Windows에서 디버깅 정보를 포함하는 *.pdb* 확장자의 파일이 표시됩니다. 이제 *main* 또는 *main.exe* 파일을 실행합니다.

```console
$ ./main # 또는 .\\main.exe on Windows
```

만약 *main.rs* 가 "Hello, world!" 프로그램이라면 이 줄은 `Hello, world!`를 터미널에 출력합니다.

Ruby, Python 또는 JavaScript와 같은 동적 언어에 익숙하다면 컴파일과 실행을 별도의 단계로 처리하는 데 익숙하지 않을 수 있습니다. Rust는 *사전 컴파일* 언어이므로 프로그램을 컴파일하여 다른 사람에게 제공할 수 있으며, 그들은 Rust가 설치되어 있지 않더라도 실행할 수 있습니다. *.rb*, *.py* 또는 *.js* 파일을 제공하면 Ruby, Python 또는 JavaScript 구현체가 설치되어 있어야 합니다. 그러나 이러한 언어에서는 컴파일과 실행을 위한 하나의 명령어만 필요합니다. 언어 설계에서는 항상 무언가를 얻기 위해 무언가를 희생해야 합니다.

`rustc`로만 컴파일하는 것은 간단한 프로그램에는 충분하지만 프로젝트가 커질수록 모든 옵션을 관리하고 코드를 공유하는 것이 쉬워야 합니다. 다음으로 Cargo 도구를 소개하여 실제 Rust 프로그램을 작성하는 방법을 알려드리겠습니다.

[troubleshooting]: ch01-01-installation.html#troubleshooting
[devtools]: appendix-04-useful-development-tools.html
