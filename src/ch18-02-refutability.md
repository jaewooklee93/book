##  불가능성 검사: 패턴이 일치하지 않을 가능성

패턴은 불가능성 검사 패턴과 확실성 검사 패턴의 두 가지 형태로 나뉩니다. 모든 가능한 값에 일치하는 패턴은 *확실성 검사 패턴*입니다. 예를 들어, `let x = 5;` 문에서 `x`는 모든 값에 일치하기 때문에 일치하지 않을 가능성이 없습니다. 일부 가능한 값에 대해 일치하지 않을 수 있는 패턴은 *불가능성 검사 패턴*입니다. 예를 들어, `if let Some(x) = a_value` 에서 `Some(x)` 패턴은 `a_value` 변수의 값이 `None`이 아니라 `Some`이면서만 일치합니다. 

함수 매개변수, `let` 문, `for` 루프는 불가능성 검사 패턴을 받을 수 없습니다. 프로그램이 값이 일치하지 않을 때 의미 있는 작업을 수행할 수 없기 때문입니다. `if let` 및 `while let` 표현식은 불가능성 검사 패턴과 확실성 검사 패턴을 받을 수 있지만, 컴파일러는 불가능성 검사 패턴에 대해 경고합니다. 이는 조건문의 기능이 성공 또는 실패에 따라 다르게 실행될 수 있다는 점에서 정의된 기본적인 개념 때문입니다.

일반적으로 불가능성 검사 패턴과 확실성 검사 패턴의 차이에 대해 걱정할 필요는 없습니다. 그러나 불가능성 검사 패턴의 개념을 이해해야 컴파일러 오류 메시지에서 발생하는 경우에 대처할 수 있습니다. 그러한 경우, 코드의 의도된 동작에 따라 패턴이나 패턴을 사용하는 구조를 변경해야 합니다.

불가능성 검사 패턴을 사용할 때 발생하는 문제를 보여주는 예를 살펴보겠습니다. 18-8번 목록은 `let` 문을 보여주지만, 우리가 지정한 패턴 `Some(x)`는 불가능성 검사 패턴입니다. 예상대로 이 코드는 컴파일되지 않습니다.

```rust,ignore,does_not_compile
{{#rustdoc_include ../listings/ch18-patterns-and-matching/listing-18-08/src/main.rs:here}}
```

18-8번 목록: 불가능성 검사 패턴을 사용하여 `let`

만약 `some_option_value` 가 `None` 값이었다면, `Some(x)` 패턴에 일치하지 않아 패턴이 불가능성 검사 패턴이라는 것을 알 수 있습니다. 그러나 `let` 문은 불가능성 검사 패턴을 받을 수 없습니다. `None` 값에 대해 유효한 작업을 수행할 수 없기 때문입니다. 컴파일 시간에 Rust는 불가능성 검사 패턴을 사용하려고 시도했다는 오류를 발생시킵니다.

```console
{{#include ../listings/ch18-patterns-and-matching/listing-18-08/output.txt}}
```

유효한 값을 패턴 `Some(x)`로 완전히 덮어주지 않았기 때문에 Rust는 정당하게 컴파일 오류를 발생시킵니다.

불가능성 검사 패턴이 필요한 곳에서 확실성 검사 패턴을 사용하는 경우, `let` 대신 `if let`을 사용하여 코드를 수정할 수 있습니다. 그러면 패턴이 일치하지 않으면 코드가 단순히 중괄호 안의 코드를 건너뛰어 유효하게 실행될 수 있습니다. 18-9번 목록은 18-8번 목록의 코드를 수정하는 방법을 보여줍니다.

```rust
{{#rustdoc_include ../listings/ch18-patterns-and-matching/listing-18-09/src/main.rs:here}}
```

18-9번 목록: 불가능성 검사 패턴을 사용하는 `if let` 블록

이제 코드에 빠져들 수 있습니다. 그러나 `if let`에 확실성 검사 패턴(항상 일치하는 패턴)을 사용하면 18-10번 목록과 같이 컴파일러가 경고를 표시합니다.

```rust
{{#rustdoc_include ../listings/ch18-patterns-and-matching/listing-18-10/src/main.rs:here}}
```

18-10번 목록: `if let`에 확실성 검사 패턴 사용

Rust는 `if let`에 확실성 검사 패턴을 사용하는 것은 의미가 없다고 말합니다.

```console
```

이러한 이유로 `match` 팔의 경우 반드시 불가역 패턴을 사용해야 합니다. 마지막 팔을 제외하고는 모든 팔은 남은 값을 불가역 패턴으로 일치시켜야 합니다. Rust는 하나의 팔만 있는 `match`에서 불가역 패턴을 사용할 수 있지만, 이 문법은 특별히 유용하지 않으며 간단한 `let` 문으로 대체할 수 있습니다.

이제 패턴을 어디에서 사용하고 불가역 패턴과 반드시 패턴의 차이를 알고 있다면, 패턴을 만드는 데 사용할 수 있는 모든 문법을 살펴보겠습니다.
```